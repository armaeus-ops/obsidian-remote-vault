### 9.1. Checking Service Status with `systemd`

Checking the status of services is a critical aspect of system administration. It helps verify whether services are running correctly, troubleshoot issues, and ensure that essential services are operational. Here’s a detailed overview of how to check service status using `systemd`.

#### 1. **Using `systemctl status`**

The primary command to check the status of a service is `systemctl status`. This command provides a comprehensive view of a service's state, including whether it is active, its process ID, and recent log entries.

**Command**:
```bash
systemctl status service_name
```

**Examples**:

- **Check the Status of `apache2`**:
  ```bash
  systemctl status apache2
  ```

**Output Example**:
```plaintext
● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2024-08-16 12:34:56 UTC; 1h 23min ago
     Docs: https://httpd.apache.org/docs/2.4/
 Main PID: 1234 (apache2)
    Tasks: 6 (limit: 4915)
   Memory: 25.6M
   CGroup: /system.slice/apache2.service
           ├─1234 /usr/sbin/apache2 -k start
           ├─1235 /usr/sbin/apache2 -k start
           └─1236 /usr/sbin/apache2 -k start

Aug 16 12:34:56 hostname systemd[1]: Started The Apache HTTP Server.
```

**Explanation**:
- **Loaded**: Indicates the unit file's path and whether it is enabled or disabled.
- **Active**: Shows whether the service is active and running, including the start time and duration.
- **Main PID**: The process ID of the main service process.
- **Tasks**: Number of tasks (threads or processes) used by the service.
- **Memory**: Amount of memory used by the service.
- **CGroup**: Control group information showing the processes managed by the service.
- **Logs**: Recent log entries related to the service.

#### 2. **Checking Service Logs with `journalctl`**

`journalctl` is used to view logs generated by services. It is useful for troubleshooting and understanding the behavior of a service.

**Command**:
```bash
journalctl -u service_name
```

**Examples**:

- **View Logs for `apache2`**:
  ```bash
  journalctl -u apache2
  ```

**Additional Options**:
- **Follow Logs in Real-Time**:
  ```bash
  journalctl -u apache2 -f
  ```
  - Displays new log entries as they are written.

- **View Logs with a Time Range**:
  ```bash
  journalctl -u apache2 --since "2024-08-16 12:00:00" --until "2024-08-16 14:00:00"
  ```
  - Shows logs between specified start and end times.

- **Show Logs in Reverse Order**:
  ```bash
  journalctl -u apache2 -r
  ```
  - Displays the most recent logs first.

#### 3. **Checking Unit Files and Dependencies**

**View Unit File**:
- **Command**:
  ```bash
  systemctl cat service_name
  ```
- **Example**:
  ```bash
  systemctl cat apache2
  ```
- **Description**: Displays the configuration of the unit file, which can help understand how the service is configured and its dependencies.

**Check Dependencies**:
- **Command**:
  ```bash
  systemctl list-dependencies service_name
  ```
- **Example**:
  ```bash
  systemctl list-dependencies apache2
  ```
- **Description**: Lists the units that are required or dependent on the specified service.

#### 4. **View All Services**

**List All Active Services**:
- **Command**:
  ```bash
  systemctl list-units --type=service
  ```
- **Example**:
  ```bash
  systemctl list-units --type=service
  ```
- **Description**: Lists all currently active services and their states.

**List All Services Including Inactive**:
- **Command**:
  ```bash
  systemctl list-units --type=service --all
  ```
- **Example**:
  ```bash
  systemctl list-units --type=service --all
  ```
- **Description**: Lists all services, including those that are inactive or failed.

#### Summary

**Key Commands**:
- **Check Status**: `systemctl status service_name`
- **View Logs**: `journalctl -u service_name`
- **View Unit File**: `systemctl cat service_name`
- **Check Dependencies**: `systemctl list-dependencies service_name`
- **List Services**: `systemctl list-units --type=service`

**Usage Tips**:
- Use `systemctl status` for a quick overview of a service’s state.
- Use `journalctl` to delve into logs and troubleshoot issues.
- Check unit files and dependencies to understand service configuration and requirements.

**LPIC Reference**:
- **Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard**
- **Subtopic 104.6: Manage system services using systemctl**

**Key Points**:
- Regularly check service status and logs to ensure proper operation.
- Understand how to use `systemctl` and `journalctl` to manage and troubleshoot services effectively.

Managing and checking service statuses with `systemd` helps ensure that services run smoothly, identify issues promptly, and maintain overall system stability.